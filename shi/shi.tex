\documentclass[twocolumn]{ctexart}
\usepackage{setspace} %用于控制行间距离
\usepackage{xeCJK}
\usepackage{xpinyin} %使用拼音
\usepackage[
    a4paper,
    left=1.5cm,
    right=1.5cm,
    top=2cm,
    bottom=2cm,
    headheight=15pt,
    headsep=10pt,
    footskip=20pt
]{geometry}
\newcommand{\二号}{\fontsize{21pt}{\baselineskip}\selectfont}%设置二号为21pt，使用默认行距的字体设置。
\newcommand{\三号}{\fontsize{15.75pt}{\baselineskip}\selectfont}
\newcommand{\四号}{\fontsize{14pt}{\baselineskip}\selectfont}
% \newcommand{\poetry}[2]{
%      \begin{flushleft}\phantomsection
%          \songti \三号{#1}
%          \addcontentsline{toc}{subsection}{#1}\\ %\addcontentsline 用于手动把内容添加到目录里。
%          \kaishu \四号{#2}
%     \end{flushleft}
% \vspace{1cm}
% }






% 定义一个计数器
\newcounter{poetrycounterall} % 用于记录每位诗人文体的不同.
\setcounter{poetrycounterall}{0} % 初始化为 0
\newcounter{poetrycounter}[section] % 用于记录每位诗人文体的不同.
\setcounter{poetrycounter}{0} % 初始化为 0
\newcounter{poetrycountersub}[subsection] % 用于记录每位诗人文体的不同.
\setcounter{poetrycountersub}{0} % 初始化为 0

\newcommand{\poetry}[2]{
    \stepcounter{poetrycounterall}%添加计数器
    \stepcounter{poetrycounter}%添加计数器
    \stepcounter{poetrycountersub}%添加计数器
    \begin{flushleft}\phantomsection
        \CJKfontspec{STSong}  \三号{#1}
        \addcontentsline{toc}{subsubsection}{#1}\\ %\addcontentsline 用于手动把内容添加到目录里。
        \vspace{0.2cm}
        \begin{spacing}{0.8} % 设置行间距为 1.5 倍
            \CJKfontspec{KaiTi} \四号{#2}
        \end{spacing}
    \end{flushleft}
    % \vspace{0.3cm}
    \vspace{-2em} %消除flushleft自带行的空白
    }



\usepackage[bookmarks,hypertexnames=false,debug]{hyperref}

\begin{document}

\tableofcontents   

\newpage

\clearpage
\section{李白}
\input{./poetry/李白/李白五绝.tex}
\input{./poetry/李白/李白七绝.tex}
\input{./poetry/李白/李白五律.tex}
\input{./poetry/李白/李白七律.tex}
\input{./poetry/李白/李白古风.tex}
\newcounter{libaiqijuecot}
\setcounter{libaiqijuecot}{\thepoetrycountersub}

一共收入了李白 \thepoetrycounter  首诗。

% 五言绝句有 \thelibaiwujuecot 首.七言绝句有 \thelibaiqijuecot 首.
\clearpage


\section{杜甫}
\input{./poetry/杜甫/杜甫五绝}
\input{./poetry/杜甫/杜甫五律}
\input{./poetry/杜甫/杜甫七绝}
\input{./poetry/杜甫/杜甫七律}

\clearpage
\section{白居易}
\input{./poetry/白居易/白居易五绝}
\input{./poetry/白居易/白居易五律}
\input{./poetry/白居易/白居易七绝}
\input{./poetry/白居易/白居易七律}

\clearpage

% \input{苏轼}
% \clearpage
% \input{纳兰性德}
% \clearpage
% \input{李贺}

一共有 \thepoetrycounterall 首.

\end{document}


